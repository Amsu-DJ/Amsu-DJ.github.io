<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>基于Unity学习C#基础的笔记 Day08 | 山食风</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="目录 继承 结构体 静态static">
<meta property="og:type" content="article">
<meta property="og:title" content="基于Unity学习C#基础的笔记 Day08">
<meta property="og:url" content="http://amsu-dj.github.io/2021/08/18/studyCsharp08/index.html">
<meta property="og:site_name" content="山食风">
<meta property="og:description" content="目录 继承 结构体 静态static">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-08-18T11:42:20.000Z">
<meta property="article:modified_time" content="2021-08-18T11:43:05.159Z">
<meta property="article:author" content="DJ">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="山食风" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">山食风</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://Amsu-DJ.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-studyCsharp08" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/08/18/studyCsharp08/" class="article-date">
  <time datetime="2021-08-18T11:42:20.000Z" itemprop="datePublished">2021-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      基于Unity学习C#基础的笔记 Day08
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li>继承</li>
<li>结构体</li>
<li>静态static</li>
</ol>
<span id="more"></span>
<h2 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h2><h3 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h3><ul>
<li>主函数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace Day08</span><br><span class="line">&#123;</span><br><span class="line">    class Program</span><br><span class="line">    &#123;</span><br><span class="line">        static void Main(string[] args)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(&quot;Hello World!&quot;);</span><br><span class="line">            //C# 泛型 集合</span><br><span class="line">            //本质是数组</span><br><span class="line">            //List&lt;数据类型&gt;</span><br><span class="line">            List&lt;int&gt; list01 = new List&lt;int&gt;();</span><br><span class="line">            list01.Add(1);</span><br><span class="line">            //字典集合</span><br><span class="line">            //根据？找？</span><br><span class="line">            Dictionary&lt;string, int&gt; dic = new Dictionary&lt;string, int&gt;();</span><br><span class="line">            dic.Add(&quot;lh&quot;, 12);</span><br><span class="line">            dic.Add(&quot;lh02&quot;, 13);</span><br><span class="line">            int ihInt = dic[&quot;lh&quot;];</span><br><span class="line">            Console.WriteLine(ihInt);</span><br><span class="line">            //继承</span><br><span class="line">            //现象和语法特点</span><br><span class="line">            //static</span><br><span class="line">            //结构体</span><br><span class="line"></span><br><span class="line">            //继承</span><br><span class="line">            //子类可以使用父类成员</span><br><span class="line">            //父类只能使用父类成员</span><br><span class="line">            //子类不能访问父类private属性的参数,但能访问protected属性</span><br><span class="line">            //protected：仅限有继承关系的其他类访问</span><br><span class="line">            Student student01 = new Student();</span><br><span class="line">            student01.Name = &quot;01&quot;;//Student类中没有name字段，但继承了父类中Person类的name成员。</span><br><span class="line"></span><br><span class="line">            Person person01 = new Student();//父类的引用 指向子类的对象 但只能使用父类成员</span><br><span class="line">            //若想使用子类成员，可显式转换为子类对象</span><br><span class="line">            Student student02 = (Student)person01;</span><br><span class="line"></span><br><span class="line">            //Teacher teacher01 = (Teacher)person01;子类转换不报错但会出问题</span><br><span class="line">            Teacher teacher01 = person01 as Teacher;//如果转换失败，不会抛出异常</span><br><span class="line">            if (teacher01!=null)//强制子类转换成员不共有，为空</span><br><span class="line">            &#123;</span><br><span class="line">                teacher01.Salary = 100;</span><br><span class="line">            &#125;</span><br><span class="line">            //</span><br><span class="line">            AboutStatic();</span><br><span class="line">            AboutDoubleHelper();</span><br><span class="line">        &#125;</span><br><span class="line">        private static void AboutStatic()</span><br><span class="line">        &#123;</span><br><span class="line">            Student stu01 = new Student();</span><br><span class="line">            Student stu02 = new Student();</span><br><span class="line">            Student stu03 = new Student();</span><br><span class="line">            //需求：统计Student类，创建的对象数量</span><br><span class="line">            //通过引用调用</span><br><span class="line">            Console.WriteLine(stu03.InstanceCount);//1</span><br><span class="line">            //通过类名调用</span><br><span class="line">            Console.WriteLine(Student.StaticCount);//5</span><br><span class="line">            //static</span><br><span class="line">            //- 静态成员变量</span><br><span class="line">            //使用static修饰静态成员变量</span><br><span class="line">            //静态成员属于类，类被加载时初始化，且只有一份。</span><br><span class="line">            //实例成员变量属于对象，在每个对象被创建时初始化，每个对象一份。</span><br><span class="line">            //特点：存在优先于对象，被所有对象所共享，常驻内存</span><br><span class="line">            //</span><br><span class="line">            //- 静态构造函数</span><br><span class="line">            //初始化类的静态数据成员</span><br><span class="line">            //仅在类被加载时执行一次</span><br><span class="line">            //不允许使用访问修饰符</span><br><span class="line">            //</span><br><span class="line">            //- 静态方法</span><br><span class="line">            //调用实例方法时，会隐式的传递对象引用，以便在方法内部可以正确访问该对象成员变量</span><br><span class="line">            //通过类名调用静态方法时，因为没有具体对象，所以在static方法中不能访问实例成员</span><br><span class="line">            //</span><br><span class="line">            //-静态类</span><br><span class="line">            //使用static关键字修饰的类</span><br><span class="line">            //不能实例化，只能包含静态成员</span><br><span class="line">            //静态类不能被继承，但是静态方法、属性都可以被继承</span><br><span class="line">            //</span><br><span class="line">            //-适用性</span><br><span class="line">            //利：单独空间存储，所有对象共享，可直接被类名调用</span><br><span class="line">            //弊：静态方法中只能访问静态成员，共享数据被多个对象访问时会出现并发</span><br><span class="line">            //适用场合：</span><br><span class="line">            //1.所有对象需要共享的数据</span><br><span class="line">            //2.在没有对象前就要访问成员</span><br><span class="line">            //3.工具类适合做静态类（常用，不需要过多数据）</span><br><span class="line">        &#125;</span><br><span class="line">        private static void AboutDoubleHelper()</span><br><span class="line">        &#123;</span><br><span class="line">            string[,] strArray = new string[3, 4];</span><br><span class="line">            for (int i = 0; i &lt; strArray.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = 0; j &lt; strArray.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    strArray[i, j] = i.ToString() + j.ToString();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            string[] result = DoubleArrayHelper.GetElements(strArray, 2, 3, Direction.Up, 1);</span><br><span class="line">        &#125;</span><br><span class="line">        //结构体</span><br><span class="line">        //结构 struct</span><br><span class="line">        //定义：用于封装小型相关变量的值类型。与类语法结构类似，都可以包含数据成员和方法成员。但结构属于值类型，类属于引用类型</span><br><span class="line">        //适用性：表示点、颜色等轻量级对象。如创建存储1000个点的数组，如果使用类，将为每个对象分配更多内存，使用结构可以节约资源</span><br><span class="line">        //- 定义结构体</span><br><span class="line">        //自带无参数构造函数</span><br><span class="line">        //构造函数中，必须先为所有字段赋值：有参数构造函数先调用无参数构造函数（:this()），为自动属性的字段赋值，也可以不写自动属性</span><br><span class="line">        //使用struct关键字定义</span><br><span class="line">        //除非字段被声明为const或static，否则无法初始化</span><br><span class="line">        //结构不能继承，但可以实现接口</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>Student类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace Day08</span><br><span class="line">&#123;</span><br><span class="line">    class Student:Person</span><br><span class="line">    &#123;</span><br><span class="line">        //字段</span><br><span class="line">        private int score;</span><br><span class="line">        private int instanceCount;</span><br><span class="line">        private  static int staticCount;</span><br><span class="line">        //属性</span><br><span class="line">        public int Score</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return score; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.score = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public int InstanceCount</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return instanceCount; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public static int StaticCount</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return staticCount; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //构造函数</span><br><span class="line">        public Student()</span><br><span class="line">        &#123;</span><br><span class="line">            instanceCount++;</span><br><span class="line">            staticCount++;</span><br><span class="line">        &#125;</span><br><span class="line">        static Student()</span><br><span class="line">        &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        //方法</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>Teacher类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace Day08</span><br><span class="line">&#123;</span><br><span class="line">    class Teacher:Person</span><br><span class="line">    &#123;</span><br><span class="line">        //字段</span><br><span class="line">        private int salary;</span><br><span class="line">        //属性</span><br><span class="line">        public int Salary</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return salary; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.salary = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //构造函数</span><br><span class="line">        //方法</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>Person类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace Day08</span><br><span class="line">&#123;</span><br><span class="line">    class Person</span><br><span class="line">    &#123;</span><br><span class="line">        //字段</span><br><span class="line">        private string name;</span><br><span class="line">        protected int a;</span><br><span class="line">        //属性</span><br><span class="line">        public string Name</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return name; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.name = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //构造函数</span><br><span class="line">        //方法</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Direction结构体</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace Day08</span><br><span class="line">&#123;</span><br><span class="line">    struct Direction</span><br><span class="line">    &#123;</span><br><span class="line">        //字段</span><br><span class="line">        private int rIndex;</span><br><span class="line">        private int cIndex;</span><br><span class="line">        //属性</span><br><span class="line">        public int RIndex</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return this.rIndex; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.rIndex = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public int CIndex</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return this.cIndex; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.cIndex = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //构造函数</span><br><span class="line">        public Direction(int rIndex,int cIndex ):this()</span><br><span class="line">        &#123;</span><br><span class="line">            this.RIndex = rIndex;</span><br><span class="line">            this.CIndex = cIndex;</span><br><span class="line">        &#125;</span><br><span class="line">        //方法</span><br><span class="line">        public static  Direction Up</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return new Direction(-1, 0); &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public static Direction Down</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return new Direction(1, 0); &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public static Direction Left</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return new Direction(0, -1); &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public static Direction Right</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return new Direction(0, 1); &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>静态DoubleArrayHelper类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace Day08</span><br><span class="line">&#123;</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 二维数组助手类</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    static class DoubleArrayHelper</span><br><span class="line">    &#123;</span><br><span class="line">        //字段</span><br><span class="line"></span><br><span class="line">        //属性</span><br><span class="line">        //构造函数</span><br><span class="line">        //方法</span><br><span class="line">        //获取某个元素某个方向上的元素</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 获取二维数组元素</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        /// &lt;param name=&quot;array&quot;&gt;二维数组&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=&quot;rIndex&quot;&gt;行索引&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=&quot;cIndex&quot;&gt;列索引&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=&quot;dir&quot;&gt;方向&lt;/param&gt;</span><br><span class="line">        /// &lt;param name=&quot;count&quot;&gt;希望查找的数量&lt;/param&gt;</span><br><span class="line">        /// &lt;returns&gt;所有满足条件的元素&lt;/returns&gt;</span><br><span class="line">        public static string[] GetElements(string[,] array,int rIndex,int cIndex,Direction dir,int count)</span><br><span class="line">        &#123;</span><br><span class="line">            //int[] result = new int[count];//不确定多少个</span><br><span class="line">            //string[] result = new string[1];</span><br><span class="line">            List&lt;string&gt; result = new List&lt;string&gt;(count);</span><br><span class="line"></span><br><span class="line">            for (int i = 0; i &lt; count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                //dir ==&gt;Direction.Up ==&gt; RIndex==-1,CIndex==0</span><br><span class="line">                rIndex += dir.RIndex;//-1</span><br><span class="line">                cIndex += dir.CIndex;//0</span><br><span class="line">                if (rIndex &gt;=0 &amp;&amp; rIndex &lt;array.GetLength(0))//防止超出</span><br><span class="line">                &#123;</span><br><span class="line">                    if (cIndex &gt;= 0 &amp;&amp; cIndex &lt; array.GetLength(1))//防止超出</span><br><span class="line">                    &#123;</span><br><span class="line">                        result.Add(array[rIndex, cIndex]);</span><br><span class="line">                        //result[0] = array[rIndex, cIndex];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            //new List&lt;int&gt;(array[1,2]);//数组转集合</span><br><span class="line">            return result.ToArray();//集合转数组</span><br><span class="line">            //return result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><ol>
<li>2048核心类<h3 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h3></li>
</ol>
<ul>
<li>主函数界面<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line"></span><br><span class="line">namespace _2048CoreClass</span><br><span class="line">&#123;</span><br><span class="line">    class Program</span><br><span class="line">    &#123;</span><br><span class="line">        static void Main(string[] args)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(&quot;Hello World!&quot;);</span><br><span class="line">            //1.将游戏核心类实例化</span><br><span class="line">            GameCore core = new GameCore();</span><br><span class="line">            //2.随机生成两个数</span><br><span class="line">            core.GenerateNumber();</span><br><span class="line">            core.GenerateNumber();</span><br><span class="line">            //3.生成地图</span><br><span class="line">            DrawMap(core.Map);</span><br><span class="line">            //操作</span><br><span class="line">            while (true)</span><br><span class="line">            &#123;</span><br><span class="line">                KeyButton(core);</span><br><span class="line">                if (core.IsChange)</span><br><span class="line">                &#123;</span><br><span class="line">                    core.GenerateNumber();</span><br><span class="line">                    DrawMap(core.Map);</span><br><span class="line">                    core.IsSuccessful();</span><br><span class="line">                    core.IsDefualt();</span><br><span class="line">                    if (core.IsGameOver)</span><br><span class="line">                    &#123;</span><br><span class="line">                        break;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            //总结 这是一种消除类游戏做法</span><br><span class="line">            //逻辑代码与界面代码不能臃肿在一起</span><br><span class="line">            //逻辑层 数据层 与 表现层 松散耦合</span><br><span class="line">            //高内聚 低耦合：一个类的东西尽可能放一起，类与类之间松散耦合</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        private static void DrawMap(int[,] map)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.Clear();</span><br><span class="line">            for (int i = 0; i &lt; map.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    Console.Write(map[i, j]+&quot;\t&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">                Console.WriteLine();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        private static void KeyButton(GameCore core)</span><br><span class="line">        &#123;</span><br><span class="line">            switch (Console.ReadLine())</span><br><span class="line">            &#123;</span><br><span class="line">                case &quot;w&quot;:</span><br><span class="line">                    core.Move(MoveDirection.Up);</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;s&quot;:</span><br><span class="line">                    core.Move(MoveDirection.Down);</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;a&quot;:</span><br><span class="line">                    core.Move(MoveDirection.Left);</span><br><span class="line">                    break;</span><br><span class="line">                case &quot;d&quot;:</span><br><span class="line">                    core.Move(MoveDirection.Right);</span><br><span class="line">                    break;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">       </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>GameCore类</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace _2048CoreClass</span><br><span class="line">&#123;</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 游戏核心类，负责处理游戏核心算法</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    class GameCore</span><br><span class="line">    &#123;</span><br><span class="line">        //字段</span><br><span class="line">        private int[,] map;</span><br><span class="line">        private int[] mergeArray;</span><br><span class="line">        private int[] removeZeroArray;</span><br><span class="line">        private List&lt;Location&gt; emptyLocationList;</span><br><span class="line">        private Random random;</span><br><span class="line">        private int[,] originMap;</span><br><span class="line">        private bool isChange;</span><br><span class="line">        private bool isGameOver;</span><br><span class="line">        //属性</span><br><span class="line">        public int[,] Map</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return map; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public bool IsChange</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return isChange; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.isChange = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public bool IsGameOver</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return isGameOver; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.isGameOver = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //构造函数</span><br><span class="line">        public GameCore()</span><br><span class="line">        &#123;</span><br><span class="line">            map=new int[4,4];</span><br><span class="line">            mergeArray = new int[4];</span><br><span class="line">            removeZeroArray = new int[4];</span><br><span class="line">            emptyLocationList = new List&lt;Location&gt;(16);</span><br><span class="line">            random = new Random();</span><br><span class="line">            originMap = new int[4, 4];</span><br><span class="line">            IsGameOver = false;</span><br><span class="line">        &#125;</span><br><span class="line">        //方法</span><br><span class="line">        //去零</span><br><span class="line">        private void RemoveZero()</span><br><span class="line">        &#123;</span><br><span class="line">            int index=0;</span><br><span class="line">            Array.Clear(removeZeroArray, 0, 4);</span><br><span class="line">            for (int i = 0; i &lt; mergeArray.Length; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                if (mergeArray[i] != 0)</span><br><span class="line">                &#123;</span><br><span class="line">                    removeZeroArray[index++] = mergeArray[i];</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">            removeZeroArray.CopyTo(mergeArray, 0);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        //合并数据</span><br><span class="line">        private void Merge()</span><br><span class="line">        &#123;</span><br><span class="line">            RemoveZero();</span><br><span class="line">            for (int i = 0; i &lt; mergeArray.Length-1; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                if (mergeArray[i]!=0 &amp;&amp; mergeArray[i]==mergeArray[i+1])</span><br><span class="line">                &#123;</span><br><span class="line">                    mergeArray[i] += mergeArray[i + 1];</span><br><span class="line">                    mergeArray[i + 1] = 0;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            RemoveZero();</span><br><span class="line">        &#125;</span><br><span class="line">        //移动</span><br><span class="line">        private void MoveUp()</span><br><span class="line">        &#123;</span><br><span class="line">            //获取每列数据 形成一维数组</span><br><span class="line">            for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int i = 0; i &lt; map.GetLength(0); i++)//获取列数据</span><br><span class="line">                &#123;</span><br><span class="line">                    mergeArray[i] = map[i, j];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Merge();</span><br><span class="line"></span><br><span class="line">                for (int i = 0; i &lt; map.GetLength(0); i++)//还回原数组</span><br><span class="line">                &#123;</span><br><span class="line">                    map[i, j] = mergeArray[i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //-- 下移</span><br><span class="line">        private void MoveDown()</span><br><span class="line">        &#123;</span><br><span class="line">            for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int i = map.GetLength(0) - 1; i &gt;= 0; i--)</span><br><span class="line">                &#123;</span><br><span class="line">                    mergeArray[map.GetLength(0) - 1 - i] = map[i, j];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                Merge();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                for (int i = map.GetLength(0) - 1; i &gt;= 0; i--)</span><br><span class="line">                &#123;</span><br><span class="line">                    map[i, j] = mergeArray[map.GetLength(0) - 1 - i];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //-- 左移</span><br><span class="line">        private void MoveLeft()</span><br><span class="line">        &#123;</span><br><span class="line">            for (int i = 0; i &lt; map.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    mergeArray[j] = map[i, j];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Merge();</span><br><span class="line"></span><br><span class="line">                for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    map[i, j] = mergeArray[j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //-- 右移</span><br><span class="line">        private void MoveRight()</span><br><span class="line">        &#123;</span><br><span class="line">            for (int i = 0; i &lt; map.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = map.GetLength(1) - 1; j &gt;= 0; j--)</span><br><span class="line">                &#123;</span><br><span class="line">                    mergeArray[map.GetLength(1) - 1 - j] = map[i, j];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Merge();</span><br><span class="line"></span><br><span class="line">                for (int j = map.GetLength(1) - 1; j &gt;= 0; j--)</span><br><span class="line">                &#123;</span><br><span class="line">                    map[i, j] = mergeArray[map.GetLength(1) - 1 - j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void Move(MoveDirection direction)</span><br><span class="line">        &#123;</span><br><span class="line">            Array.Copy(map, originMap, map.Length);</span><br><span class="line">            IsChange = false;</span><br><span class="line">            switch(direction)</span><br><span class="line">            &#123;</span><br><span class="line">                case MoveDirection.Up:</span><br><span class="line">                    MoveUp();</span><br><span class="line">                    break;</span><br><span class="line">                case MoveDirection.Down:</span><br><span class="line">                    MoveDown();</span><br><span class="line">                    break;</span><br><span class="line">                case MoveDirection.Left:</span><br><span class="line">                    MoveLeft();</span><br><span class="line">                    break;</span><br><span class="line">                case MoveDirection.Right:</span><br><span class="line">                    MoveRight();</span><br><span class="line">                    break;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            for (int i = 0; i &lt; map.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    if (map[i,j] != originMap[i,j])</span><br><span class="line">                    &#123;</span><br><span class="line">                        IsChange = true;</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //生成数字</span><br><span class="line">        //在空白位置，随机生成一个2（90%）或者4（10%）</span><br><span class="line">        //随机位置</span><br><span class="line">        //随机 2 4</span><br><span class="line">        private void CalculateEmpty()</span><br><span class="line">        &#123;</span><br><span class="line">            emptyLocationList.Clear();</span><br><span class="line">            //使用类将多个数据类型，封装为一个自定义类型</span><br><span class="line">            for (int i = 0; i &lt; map.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    if (map[i,j]==0)</span><br><span class="line">                    &#123;</span><br><span class="line">                        emptyLocationList.Add(new Location(i, j));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void GenerateNumber()</span><br><span class="line">        &#123;</span><br><span class="line">            CalculateEmpty();</span><br><span class="line">            int randomIndex = random.Next(0, emptyLocationList.Count);</span><br><span class="line">            Location loc = emptyLocationList[randomIndex];</span><br><span class="line">            map[loc.RIndex, loc.CIndex] = random.Next(1, 11) == 1 ? 4 : 2; </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void IsSuccessful()</span><br><span class="line">        &#123;</span><br><span class="line">            for (int i = 0; i &lt; map.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    if (map[i, j] == 2048)</span><br><span class="line">                    &#123;</span><br><span class="line">                        IsGameOver = true;</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void IsDefualt()</span><br><span class="line">        &#123;</span><br><span class="line">            for (int i = 0; i &lt; map.GetLength(0); i++)</span><br><span class="line">            &#123;</span><br><span class="line">                for (int j = 0; j &lt; map.GetLength(1); j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    if (map[i, j] != 0 &amp;&amp; IsChange==false)</span><br><span class="line">                    &#123;</span><br><span class="line">                        IsGameOver = true;</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>Location结构体<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace _2048CoreClass</span><br><span class="line">&#123;</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 位置</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    struct Location</span><br><span class="line">    &#123;</span><br><span class="line">        //字段</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 行索引</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        private int rIndex;</span><br><span class="line">        /// &lt;summary&gt;</span><br><span class="line">        /// 列索引</span><br><span class="line">        /// &lt;/summary&gt;</span><br><span class="line">        private int cIndex;</span><br><span class="line">        //属性</span><br><span class="line">        public int RIndex</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return rIndex; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.rIndex = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public int CIndex</span><br><span class="line">        &#123;</span><br><span class="line">            get</span><br><span class="line">            &#123; return cIndex; &#125;</span><br><span class="line">            set</span><br><span class="line">            &#123; this.cIndex = value; &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        //构造函数</span><br><span class="line">        public Location(int rIndex,int cIndex):this()</span><br><span class="line">        &#123;</span><br><span class="line">            this.RIndex = rIndex;</span><br><span class="line">            this.CIndex = cIndex;</span><br><span class="line">        &#125;</span><br><span class="line">        //方法</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>MoveDirection枚举</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">namespace _2048CoreClass</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">enum MoveDirection:int</span><br><span class="line">    &#123;</span><br><span class="line">        Up=0,</span><br><span class="line">        Down=1,</span><br><span class="line">        Left=3,</span><br><span class="line">        Right=4</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://amsu-dj.github.io/2021/08/18/studyCsharp08/" data-id="ckshff8ve0009jothdsh0bjw6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/08/17/studyCsharp07/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">基于Unity学习C#基础的笔记 Day07</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/08/18/studyCsharp08/">基于Unity学习C#基础的笔记 Day08</a>
          </li>
        
          <li>
            <a href="/2021/08/17/studyCsharp07/">基于Unity学习C#基础的笔记 Day07</a>
          </li>
        
          <li>
            <a href="/2021/08/15/studyCsharp06/">基于Unity学习C#基础的笔记 Day06</a>
          </li>
        
          <li>
            <a href="/2021/08/10/studyCsharp05/">基于Unity学习C#基础的笔记 Day05</a>
          </li>
        
          <li>
            <a href="/2021/08/08/studyCsharp04/">基于Unity学习C#基础的笔记 Day04</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 DJ<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>